{{ define "footerfiles" }}
<script src="{{ "js/fuse.min.js" | absURL }}"></script>
<script src="{{ "js/search.js" | absURL }}"></script>
{{ end }}

{{ define "main" }}
<section id="main-content" class="resume-section p-3 p-lg-5 d-flex flex-column align-items-center bg-light rounded shadow-sm">
  <div class="my-auto w-100" style="max-width: 600px;">
    <h2 class="mb-3 text-center">Search the site</h2>
    <p class="mb-4 text-center text-muted">Find articles, projects, and more. Start typing to see instant results.</p>
    <noscript>
      <div class="alert alert-warning" role="alert">
        JavaScript is required to use the search functionality, because the search takes place client-side in the web browser. 
        <br/>
        Please enable JavaScript in your browser to use this functionality.
      </div>
    </noscript>
    <form action="{{ "search" | absURL }}" class="mb-4">
      <div class="input-group">
        <label for="search-query" class="visually-hidden">Search</label>
        <input id="search-query" name="s" class="form-control form-control-lg" type="search" placeholder="Type to search..." autocomplete="off" aria-label="Search" />
        <span class="input-group-text"><i class="bi bi-search"></i></span>
      </div>
    </form>
    <div id="search-results" class="card border-0 shadow-sm">
      <div class="card-body">
        <h3 class="card-title">Matching pages</h3>
        <!-- Results will appear here -->
      </div>
    </div>
  </div>
</section>
<!-- this template is sucked in by search.js and appended to the search-results div above. So editing here will adjust style -->
<script id="search-result-template" type="text/x-js-template">
  <div id="summary-${key}" class="mb-4 p-3 border-bottom">
    <h4 class="mb-1"><a href="${link}" class="text-decoration-none">${title}</a></h4>
    <p class="mb-2 text-muted small">${snippet}</p>
    ${ isset tags }<span class="badge bg-primary me-1">Tags: ${tags}</span>${ end }
    ${ isset categories }<span class="badge bg-secondary">Categories: ${categories}</span>${ end }
  </div>
</script>
{{ end }}